<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>繁體中文 AI 學習工具 - Wilson</title>
    
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/buttaiwan/bpmfvs@v1.200/dist/all.css">

    <style>
        body { 
            font-family: "Microsoft JhengHei", sans-serif; 
            background-color: #fdfbf7; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            padding: 20px;
        }
        .container { 
            background: white; 
            padding: 30px; 
            border-radius: 20px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.1); 
            text-align: center; 
            max-width: 400px; 
            width: 100%; 
        }
        /* 套用注音字型：這裡是關鍵 */
        .zhuyin-text { 
            font-family: "BpmfGenSenRounded-R", serif; 
            font-size: 100px; 
            color: #d97706; 
            margin: 20px 0;
            cursor: pointer;
        }
        #character-target { 
            width: 250px; 
            height: 250px; 
            border: 1px solid #eee; 
            margin: 0 auto;
        }
        .input-group { margin-bottom: 20px; }
        input { font-size: 20px; padding: 10px; width: 60px; text-align: center; }
        button { padding: 10px 20px; font-size: 16px; cursor: pointer; background: #4a7c59; color: white; border: none; border-radius: 8px; }
        .footer { margin-top: 30px; color: #94a3b8; font-size: 14px; }
    </style>
</head>
<body>

    <div class="container">
        <h1>繁體中文 AI 筆畫</h1>
        
        <div class="input-group">
            <input type="text" id="charInput" maxlength="1" placeholder="字">
            <button id="searchBtn">搜尋</button>
        </div>
        
        <div id="result-area" style="display:none;">
            <div id="zhuyinDisplay" class="zhuyin-text" onclick="speak()"></div>
            <div id="character-target"></div>
            <p style="font-size:12px; color:#888;">點擊上方字體可聽發音</p>
        </div>

        <div class="footer">Author: Wilson</div>
    </div>

    <script>
        let writer = null;

        function speak() {
            const char = document.getElementById('charInput').value;
            window.speechSynthesis.cancel();
            const msg = new SpeechSynthesisUtterance(char);
            msg.lang = 'zh-TW';
            window.speechSynthesis.speak(msg);
        }

        document.getElementById('searchBtn').addEventListener('click', function() {
            const char = document.getElementById('charInput').value.trim();
            if (!char) return;

            const resultArea = document.getElementById('result-area');
            const target = document.getElementById('character-target');
            const zhuyinDisplay = document.getElementById('zhuyinDisplay');

            // 顯示結果區域
            resultArea.style.display = 'block';
            target.innerHTML = ''; // 清空舊的
            zhuyinDisplay.innerText = char; // 顯示字型注音

            // 建立筆畫
            writer = HanziWriter.create('character-target', char, {
                width: 250,
                height: 250,
                padding: 10,
                showOutline: true,
                strokeColor: '#333',
                charDataLoader: function(charToLoad, onComplete) {
                    fetch(`https://cdn.jsdelivr.net/npm/hanzi-writer-data-traditional@2/${encodeURIComponent(charToLoad)}.json`)
                        .then(res => res.json())
                        .then(onComplete);
                }
            });

            writer.animateCharacter();
            speak();
        });
    </script>
</body>
</html>
